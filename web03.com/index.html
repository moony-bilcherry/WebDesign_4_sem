<!DOCTYPE html>
<html>
    <head>
        <title>Лаба 3 (коллбэки)</title>
		<meta charset="UTF-8">
		<style type="text/css">
		* 
		{
			font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
			text-align: center;
		}
        #check {
            margin: auto;
			margin-top: 20px;
			padding: 10px;
            width: fit-content;
            border-radius: 8px;
            border: 3px solid teal;
            text-align: center;
			display: none;
        }

		</style>
		<script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    </head>
    <body>
        <h1>Callback-функции</h1>
        <input type="text" name="login" placeholder="Имя пользователя">
		<button id="ex1">Поиск</button>
		</br>
        <h4>Обнаруженные пользователи: </h4>
		<div id="result"></div>
	</br>
        <div id="check">Жду ответа</div>
			
		<script>
			$("#ex1" ).click(function(e) {
				console.log("Кнопка нажата");

                let login = $('input[name="login"]').val();

				$.ajax({
					url: 'connect.php',
					type: 'POST',
					dataType: 'text',
					data: {
						login: login,
					},
					success: function(data) {
						console.log.data;
						$('#result').html(data);
					}

				}).fail(function() {
					alert("Произошла ошибка");
				});
			});
            $( document ).ajaxComplete(function() {
				$('#check').css("display","inline");
  				$( "#check" ).html( "Запрос выполнен (.ajaxComplete())" );
			});
		</script>
    </body>
</html>